<!DOCTYPE html><html lang="en"><head><title>è®¾è®¡æ¨¡å¼é«˜é¢‘è€ƒç‚¹&lt;ç¬¬ä¸€å­£&gt;</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="stylesheet" href="/css/highlight/xcode.min.css"><link rel="stylesheet" href="/css/bootstrap/bootstrap-tooltips.css"><link rel="stylesheet" href="/css/post.css"><script src="/js/jquery.min.js"></script><meta name="generator" content="Hexo 5.4.0"></head><body><script>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) {
  document.body.classList.add('mobile')
}</script><div><div class="inner"><p><span></span><a href="/">è¿”å›</a><span></span></p><h1>è®¾è®¡æ¨¡å¼é«˜é¢‘è€ƒç‚¹&lt;ç¬¬ä¸€å­£&gt;</h1><div class="time">2022-03-02 by yexiayun</div><h2 id="è®¾è®¡æ¨¡å¼é«˜é¢‘è€ƒç‚¹-lt-ç¬¬ä¸€å­£-gt"><a href="#è®¾è®¡æ¨¡å¼é«˜é¢‘è€ƒç‚¹-lt-ç¬¬ä¸€å­£-gt" class="headerlink" title="è®¾è®¡æ¨¡å¼é«˜é¢‘è€ƒç‚¹&lt;ç¬¬ä¸€å­£&gt;"></a>è®¾è®¡æ¨¡å¼é«˜é¢‘è€ƒç‚¹&lt;ç¬¬ä¸€å­£&gt;</h2><p>æœ¬æ–‡å¸¦æœ‰å¾ˆæµ“é‡çš„ä¸»è§‚è‰²å½©ï¼Œæœ‰ä¸åŒè§‚ç‚¹æ˜¯éå¸¸æ­£å¸¸çš„ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚</p>
<h2 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h2><ul>
<li><p>è®¾è®¡æ¨¡å¼æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</p>
</li>
<li><p>è®¾è®¡åŸåˆ™ã€Œé“ã€</p>
<ul>
<li>å•ä¸€èŒè´£åŸåˆ™ (Single Responsibility Principle)</li>
<li>å¼€æ”¾-å…³é—­åŸåˆ™ (Open-Closed Principle)</li>
</ul>
</li>
<li><p>è®¾è®¡æ¨¡å¼ã€Œæœ¯ã€</p>
<ul>
<li>ä»£ç†æ¨¡å¼</li>
<li>äº«å…ƒæ¨¡å¼</li>
<li>è¿­ä»£å™¨æ¨¡å¼</li>
</ul>
</li>
</ul>
<h2 id="è®¾è®¡æ¨¡å¼æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ"><a href="#è®¾è®¡æ¨¡å¼æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="è®¾è®¡æ¨¡å¼æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ"></a>è®¾è®¡æ¨¡å¼æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</h2><p>äº§å“è®¾è®¡ï¼Œå°±æ˜¯å°½å¯èƒ½è®©ç”¨æˆ·ç”¨å¾—æ›´èˆ’æœã€‚ä¸ä¸¥è°¨çš„è¯´ï¼Œæˆ‘ä»¬çš„OOPè®¾è®¡æ¨¡å¼ï¼Œå°±æ˜¯å°½å¯èƒ½è®©ä½ å†™çš„ä»£ç ï¼ˆå¤§éƒ¨åˆ†æƒ…å†µæ˜¯ç±»Classï¼‰å°½å¯èƒ½è®©ä½ çš„ã€ŒåŒäº‹ã€åŒ…æ‹¬è‡ªå·±ç”¨çš„èˆ’æœã€‚</p>
<p>äº§å“ã€å¤–è§‚ã€OOPå¯¹äºå¥½çš„è®¾è®¡æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼Œæ¯”å¦‚ï¼šç®€å•ï¼Œå¹²å‡€ï¼Œä¸ä¼šç»•æ¥ç»•å»ã€‚</p>
<p>è®¾è®¡æ¨¡å¼ä¸­ã€Œæ¨¡å¼ã€äºŒå­—ï¼Œä»£è¡¨ç±»çš„è®¾è®¡æ˜¯æœ‰ã€Œé“ã€å’Œã€Œæœ¯ã€çš„è§„å¾‹å¯å¾ªçš„ã€‚<br><img src="/images/remote.jpeg"></p>
<h2 id="è®¾è®¡åŸåˆ™ã€Œé“ã€ï¼ˆ2-7ï¼‰"><a href="#è®¾è®¡åŸåˆ™ã€Œé“ã€ï¼ˆ2-7ï¼‰" class="headerlink" title="è®¾è®¡åŸåˆ™ã€Œé“ã€ï¼ˆ2/7ï¼‰"></a>è®¾è®¡åŸåˆ™ã€Œé“ã€ï¼ˆ2/7ï¼‰</h2><h3 id="å•ä¸€èŒè´£åŸåˆ™-Single-Responsibility-Principle"><a href="#å•ä¸€èŒè´£åŸåˆ™-Single-Responsibility-Principle" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™ (Single Responsibility Principle)"></a>å•ä¸€èŒè´£åŸåˆ™ (Single Responsibility Principle)</h3><p>ä¸€å¥è¯ï¼šè¶Šç®€å•è¶Šå¹¸ç¦ã€‚ä½ èµ·äº†ä¸€ä¸ªç±»åLoginViewControllerï¼Œé‚£ä½ æœ€å¥½åˆ«åšå’ŒLoginæ— å…³çš„äº‹æƒ…ã€‚</p>
<p>åä¾‹1ï¼šRegisterå’ŒLoginçš„VCç•Œé¢å¾ˆåƒï¼Œåªæœ‰éƒ¨åˆ†ä¸ä¸€æ ·ï¼Œè¿™ä¸ªæ—¶å€™æ¯”è¾ƒç³Ÿç³•çš„åšæ³•å°±ï¼š</p>
<pre><code>class LoginViewController &#123;

  enum Type &#123;
  case login
  case register
  &#125;

  var type: Type = .login

  func doSomething1() &#123;
    if type == .login &#123;
      /*.login æ—¶çš„é€»è¾‘..*/
    &#125; else &#123;
      /*.register æ—¶çš„é€»è¾‘..*/
    &#125;
  &#125;

  func doSomething2() &#123;
    if type == .login &#123;
      /*.login æ—¶çš„é€»è¾‘..*/
    &#125; else &#123;
      /*.register æ—¶çš„é€»è¾‘..*/
    &#125;
  &#125;
&#125;
</code></pre>
<p>LoginViewController æ‰¿æ‹…äº†æ³¨å†Œå’Œç™»å½•çš„èŒè´£ï¼Œæ˜¾ç„¶æ˜¯ä¸æ»¡è¶³å•ä¸€åŸåˆ™çš„ã€‚</p>
<p>æ˜¾è€Œæ˜“è§çš„ç¼ºé™·ï¼š</p>
<ul>
<li>æ”¹loginçš„é€»è¾‘çš„æ—¶å€™ä¼šå½±å“åˆ°registerï¼Œæ”¹registerçš„æ—¶å€™ä¼šå½±å“åˆ°loginï¼Œã€Œæµ‹è¯•éœ€è¦ä¸¤ä¸ªç•Œé¢éƒ½æµ‹è¯•ï¼Œæ›´å®¹æ˜“å‡ºbugã€ã€‚</li>
<li>éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œloginå’Œregitserçš„ä¸šåŠ¡å¯èƒ½ä¼šè¶Šæ¥è¶Šä¸åŒï¼Œè¿™ä¸ªæ—¶å€™åªèƒ½åœ¨ä»£ç é‡ŒåŠ æ›´å¤šçš„if åˆ†æ”¯å»å†™é€»è¾‘ã€‚</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä¸å¤ªå¥½ï¼Œä½†æˆ‘ä¸ªäººè§‰å¾—æ¯”ä¸Šé¢ä¾‹å­è¦å¥½çš„åŠæ³•ï¼Œç›´æ¥æŠŠLoginViewControllerå¤åˆ¶ä¸€ä»½æ”¹åRegisterViewControllerï¼Œå„å†™å„çš„é€»è¾‘ï¼Œè¿™æ ·è‡³å°‘èƒ½ä¿è¯æ”¹ä»£ç çš„æ—¶å€™ä¸ä¼šäº’ç›¸å½±å“ã€‚</li>
<li>â­ï¸æŠŠUI/é€»è¾‘ç›¸ä¼¼éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œå°è£…æˆä¸€ä¸ªä¸ªç±»ã€‚ï¼ˆæœ‰æ—¶å€™èµ¶é¡¹ç›®çš„æ—¶å€™ä¸ä¸€å®šæœ‰æ—¶é—´åšè¿™ä¸ªå·¥ä½œï¼‰</li>
<li>æˆ–è€…ï¼Œæœ‰ä»€ä¹ˆæ›´å¥½çš„åŠæ³•å—ï¼Ÿ</li>
</ul>
<h3 id="å¼€æ”¾-å…³é—­åŸåˆ™-Open-Closed-Principle"><a href="#å¼€æ”¾-å…³é—­åŸåˆ™-Open-Closed-Principle" class="headerlink" title="å¼€æ”¾-å…³é—­åŸåˆ™ (Open-Closed Principle)"></a>å¼€æ”¾-å…³é—­åŸåˆ™ (Open-Closed Principle)</h3><p>ä¿®æ”¹/æ–°å¢ä¸€ä¸ªåŠŸèƒ½ï¼Œã€Œå°½å¯èƒ½ã€ä¸ç”¨åŠ¨åˆ°åŸæ¥çš„ä»£ç ï¼Œè§†æƒ…å†µè€Œå®šã€‚</p>
<p><img src="/images/xiaobawang.png"><br><img src="/images/rus.png"></p>
<p>å›¾1å°éœ¸ç‹æ¸¸æˆåªè¦æ¢å¡å°±è¡Œäº†ï¼Œå›¾2ä¿„ç½—æ–¯æ–¹å—æ¢æ¸¸æˆçš„è¯è¦ä¿®æ”¹ä¸»æ¿é‡Œçš„ä»£ç ã€‚ã€‚ã€‚æ˜¾ç„¶å°éœ¸ç‹æ›´å¤åˆã€Œå¼€é—­åŸåˆ™ã€</p>
<p>è¿™ä¸ªæè¿°æ¯”è¾ƒç®€ç•¥ï¼Œå¦‚æœæˆ‘ä»¬è¯¦ç»†è¡¨è¿°ä¸€ä¸‹ï¼Œé‚£å°±æ˜¯ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½åº”è¯¥æ˜¯ï¼Œåœ¨å·²æœ‰ä»£ç åŸºç¡€ä¸Šæ‰©å±•ä»£ç ï¼ˆæ–°å¢æ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰ï¼‰ï¼Œè€Œéä¿®æ”¹å·²æœ‰ä»£ç ï¼ˆä¿®æ”¹æ¨¡å—ã€ç±»ã€æ–¹æ³•ç­‰ï¼‰ã€‚</p>
<p>ä¸¾ä¸€ä¸ªå•†åŸè¿™è¾¹çš„å®é™…ä¾‹å­ï¼š</p>
<p>1ã€ä¸Šä¼ è®¢å•ä¿¡æ¯åˆ°æ£’ç³–æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨ä¸‹å‘ä¸€ä¸ªpidã€‚</p>
<p>2ã€è°ƒç”¨æ”¯ä»˜å®sdkï¼Œå¹¶æŠŠpidä¼ ç»™æ”¯ä»˜å®sdkã€‚</p>
<p>å¾ˆå®¹æ˜“å¾—åˆ°è¿™æ ·çš„ä¼ªä»£ç </p>
<pre><code>class func Payment &#123;

  private var alipaySdk = AlipaySDK()

  init() &#123;
    alipaySdk.delegate = self
  &#125;

  func pay(with order: OrderInfo) &#123;
    let request = BMRequest(order: order)

    request.start &#123; pid
      alipaySdk.pay(amount: order.amount,
                    pid: pid)
    &#125;
  &#125;

  // æ”¯ä»˜å®çš„å›è°ƒç”¨
  func alipay(_ sdk, status: ...)
  func alipay(_ sdk, userInfo: ...)
&#125;
</code></pre>
<p><img src="/images/pay1.jpeg"></p>
<p>å¦‚æœç°åœ¨è¦åŠ ä¸€ä¸ªå¾®ä¿¡å‘¢ï¼Ÿä½ ä¸å¾—ä¸åœ¨åŸæ¥ä»£ç ä¸Šåšä¿®æ”¹ï¼Œpayæ–¹æ³•å¾ˆå¯èƒ½ä¼šå˜æˆè¿™æ ·ã€‚</p>
<pre><code>class func Payment &#123;

  private var wechatSdk = WeChatSDK() // ğŸ˜“æ–°å¢
  private var alipaySdk = AlipaySDK()

  init() &#123;
    alipaySdk.delegate = self
    wechatSdk.delegate = self
  &#125;

  // âŒä¿®æ”¹ä»£ç 
  func pay(with order: OrderInfo, type: PayType) &#123;
    let request = BMRequest(order: order)

    request.start &#123; pid
      // âŒä¿®æ”¹ä»£ç 
      if (type == .alipay) &#123;
        alipaySdk.pay(amount: order.amount, 
                         pid: pid)
      &#125; else if (type == .wechat) &#123;
        wechatSdk.pay(amount: order.amount, 
                         pid: pid)
      &#125;
    &#125;
  &#125;

  // æ”¯ä»˜å®çš„å›è°ƒç”¨
  func alipay(_ sdk, status: ...)
  func alipay(_ sdk, userInfo: ...)

  // ğŸ˜“æ–°å¢ä»£ç 
  func wechat(_ sdk, status: ...)
  func wechat(_ sdk, userInfo:...)
&#125;
</code></pre>
<p>å¦‚æœè¦åŠ ä¸€ä¸ªäº¬ä¸œæ”¯ä»˜ï¼Œæˆ‘ä»¬è¿˜å¾—ç»§ç»­åœ¨æºä»£ç ä¸Šä¿®æ”¹</p>
<p>æˆ‘ä»¬çš„åšæ³•ï¼š</p>
<p><img src="/images/pay2.jpeg"></p>
<pre><code>protocol PaySdk &#123;
  pay(amount: Int, pid: Int)
&#125;

class Alipay: PaySdk &#123;
  func pay(amount: Int, pid: Int) &#123;
    ...æ”¯ä»˜æŠ¥ç›¸å…³çš„é€»è¾‘
  &#125;

    // æ”¯ä»˜å®çš„å›è°ƒç”¨
  func alipay(_ sdk, status: ...)
  func alipay(_ sdk, userInfo: ...)
&#125;

class WeCheat: PaySdk &#123;
  func pay(amount: Int, pid: Int) &#123;
    ...å¾®ä¿¡æ”¯ä»˜é€»è¾‘
  &#125;

  // å¾®ä¿¡å›è°ƒç”¨
  func wechat(_ sdk, status: ...)
  func wechat(_ sdk, userInfo:...)
&#125;

class Payment &#123;
  private sdk: PaySdk!

  init(sdk: PaySdk) &#123;
    self.sdk = sdk
  &#125;

  func pay(with order: OrderInfo) &#123;
    let request = BMRequest(order: order)
    request.start &#123; pid
      sdk.pay(amount: order.amount, 
                       pid: pid)
    &#125;
&#125;

//  ä½¿ç”¨
let alipay = Payment(sdk: Alipay())
alipay.pay(amount: ...)

let wechatPay = Payment(sdk: WeCheat())
wechatPay.pay(amount: ...)
</code></pre>
<p>ä¹‹åå¦‚æœè¦å†æ¥ä¸€ä¸ªäº¬ä¸œæ”¯ä»˜</p>
<p>ä½ åªè¦å®ç°PaySdk è¿™ä¸ªåè®®å³å¯ï¼š</p>
<pre><code>class JdPay: PaySdk &#123;
  func pay(amount: Int, pid: Int) &#123;
    ...äº¬ä¸œæ”¯ä»˜é€»è¾‘
  &#125;

  // äº¬ä¸œçš„å›è°ƒ
  func jd(_ sdk, status: ...)
  func jd(_ sdk, userInfo:...)
&#125;

// ä½¿ç”¨
let jdpay = Payment(sdk: JdPay())
jdpay.pay(amount: ...)
</code></pre>
<p>æ–°å¢åŠŸèƒ½å†™ã€Œæ–°ä»£ç ã€ï¼Œä¸éœ€è¦æ”¹è€ä»£ç ï¼Œåšåˆ°äº†å¼€é—­åŸåˆ™ã€‚</p>
<h2 id="è®¾è®¡æ¨¡å¼ã€Œæœ¯ã€-lt-3-23-gt"><a href="#è®¾è®¡æ¨¡å¼ã€Œæœ¯ã€-lt-3-23-gt" class="headerlink" title="è®¾è®¡æ¨¡å¼ã€Œæœ¯ã€&lt;3/23&gt;"></a>è®¾è®¡æ¨¡å¼ã€Œæœ¯ã€&lt;3/23&gt;</h2><h3 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h3><p>å®˜æ–¹è¯´æ³•ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p>
<p>æƒ³æƒ³æˆ‘ä»¬çš„ç§‘å­¦ä¸Šç½‘ï¼Œå°±æ˜¯ä»£ç†æ¨¡å¼.</p>
<p>å‡å¦‚æˆ‘ä»¬è®¿é—®YouTubeï¼Œåªå‘äº†ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p>ä¸Šè¡Œï¼šå®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ â€”-&gt; ä»£ç†æœåŠ¡å™¨â€”â€”&gt; YoutubeæœåŠ¡å™¨</p>
<p>ä¸‹è¡Œï¼šYoutubeæœåŠ¡å™¨ â€”â€“&gt; ä»£ç†æœåŠ¡å™¨â€”â€”&gt; å®¢æˆ·ç«¯</p>
<p>ä¸‹é¢è¿˜æ˜¯æ¥ä¸€ä¸ªå®é™…ä¾‹å­ï¼š</p>
<pre><code>protocol User &#123;
  var isPrime: Bool &#123; set get &#125;
  func syncToServer()
&#125;

class FemometerUser: User &#123;

  var isPrime: Bool

  init(_ isPrime: Bool) &#123;
    self.isPrime = isPrime
  &#125;

  func syncToServer() &#123;
    // .. æœåŠ¡å™¨..
  &#125;
&#125;
</code></pre>
<p>å‡è®¾iOSæ²¡æœ‰ KVOåŠŸèƒ½ï¼Œæˆ‘ä»¬æƒ³ç›‘å¬isPrimeå±æ€§çš„æ”¹å˜ï¼Œä½†æ˜¯åˆä¸æƒ³æ”¹åŠ¨åŸæ¥FemometerUserã€Userçš„ä»£ç ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<pre><code>protocol User &#123;
  var isPrime: Bool &#123; set get &#125;
  func syncToServer()
&#125;

class FemometerUser: User &#123;

  var isPrime: Bool

  init(_ isPrime: Bool) &#123;
    self.isPrime = isPrime
  &#125;

  func syncToServer() &#123;
    // .. æœåŠ¡å™¨..
  &#125;
&#125;

// ä»£ç†
class UserIsPrimeObserverProxy: User &#123;

  private var target: User // çœŸå®å¯¹è±¡
  public var isPrimeDidChanged: ((Bool) -&gt; Void)?

  var isPrime: Bool &#123;
    set &#123;
      // è½¬å‘ç»™çœŸå®çš„å¯¹è±¡, å¯ä»¥åŠ ä¸€äº›è‡ªå·±çš„é€»è¾‘
      if newValue == target.isPrime &#123;
        // å»é‡
        return
      &#125;
      target.isPrime = newValue
      isPrimeDidChanged?(newValue)
    &#125;
    get &#123;
      // ä»çœŸå®çš„å¯¹è±¡ä¸­è·å–ä»·å€¼
      return target.isPrime
    &#125;
  &#125;

  func syncToServer() &#123;
    // è½¬å‘ç»™çœŸå®çš„å¯¹è±¡
    target.syncToServer()
  &#125;

  init(_ target: User) &#123;
    self.target = target
  &#125;
&#125;
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code>let user = FemometerUser(false)

let observerProxy = UserIsPrimeObserverProxy(user)

observerProxy.isPrimeDidChanged = &#123; newValue in
  print(&quot;change:\(newValue)&quot;)
&#125;

// ä½¿ç”¨ä»£ç†è®¿é—®
observerProxy.isPrime = false
observerProxy.isPrime = true
observerProxy.isPrime = true
observerProxy.isPrime = true
observerProxy.isPrime = false

// ä½¿ç”¨ä»£ç†è®¿é—®åŒæ­¥æœåŠ¡å™¨çš„æ–¹æ³•
observerProxy.syncToServer()

// è¾“å‡º
change:true
change:false
</code></pre>
<p>ä¸‹é¢æ˜¯KVOçš„å®˜æ–¹å®ç°åŸç†å›¾ï¼Œè¿ç”¨äº†isa_hookå®ç°å¯¹è±¡çº§åˆ«çš„hookå®ç°çš„ï¼Œå…¶æœ¬è´¨è¿˜æ˜¯ä»£ç†æ¨¡å¼ã€‚</p>
<p><img src="/images/proxy.png"></p>
<h3 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="headerlink" title="äº«å…ƒæ¨¡å¼"></a>äº«å…ƒæ¨¡å¼</h3><p>è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p>
<p>äº«å…ƒï¼ˆFlyweightï¼‰çš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼šå¦‚æœä¸€ä¸ªå¯¹è±¡å®ä¾‹ä¸€ç»åˆ›å»ºå°±ä¸å¯å˜ï¼Œé‚£ä¹ˆåå¤åˆ›å»ºç›¸åŒçš„å®ä¾‹å°±æ²¡æœ‰å¿…è¦ï¼Œç›´æ¥å‘è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªå…±äº«çš„å®ä¾‹å°±è¡Œï¼Œè¿™æ ·å³èŠ‚çœå†…å­˜ï¼Œåˆå¯ä»¥å‡å°‘åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œæé«˜è¿è¡Œé€Ÿåº¦ã€‚</p>
<p>äº«å…ƒæ¨¡å¼åœ¨Javaæ ‡å‡†åº“ä¸­æœ‰å¾ˆå¤šåº”ç”¨ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒåŒ…è£…ç±»å‹å¦‚Byteã€Integeréƒ½æ˜¯ä¸å˜ç±»ï¼Œå› æ­¤ï¼Œåå¤åˆ›å»ºåŒä¸€ä¸ªå€¼ç›¸åŒçš„åŒ…è£…ç±»å‹æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚ä»¥Integerä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡Integer.valueOf()è¿™ä¸ªé™æ€å·¥å‚æ–¹æ³•åˆ›å»ºIntegerå®ä¾‹ï¼Œå½“ä¼ å…¥çš„intèŒƒå›´åœ¨-128~+127ä¹‹é—´æ—¶ï¼Œä¼šç›´æ¥è¿”å›ç¼“å­˜çš„Integerå®ä¾‹ï¼š</p>
<pre><code>public class Main &#123;
    public static void main(String[] args) throws InterruptedException &#123;
        Integer n1 = Integer.valueOf(100);
        Integer n2 = Integer.valueOf(100);
        System.out.println(n1 == n2); // true è¯´æ˜åœ°å€ç›¸åŒ
    &#125;
&#125;
</code></pre>
<p>æƒ³æƒ³æˆ‘ä»¬çš„UITableViewçš„å¤ç”¨æœºåˆ¶ï¼Œæ˜¯ä¸æ˜¯ç”¨çš„äº«å…ƒæ¨¡å¼ï¼Ÿ</p>
<h3 id="è¿­ä»£å™¨æ¨¡å¼"><a href="#è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="è¿­ä»£å™¨æ¨¡å¼"></a>è¿­ä»£å™¨æ¨¡å¼</h3><p>å®˜æ–¹è¯´æ³•ï¼š<strong>è¿­ä»£å™¨æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œè®©ä½ èƒ½åœ¨ä¸æš´éœ²é›†åˆåº•å±‚è¡¨ç°å½¢å¼ ï¼ˆåˆ—è¡¨ã€ æ ˆå’Œæ ‘ç­‰ï¼‰ çš„æƒ…å†µä¸‹éå†é›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ ã€‚</p>
<p>è¿˜æ˜¯æ¥ä¸€ä¸ªfmå®é™…ä¾‹å­ï¼Œæˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªè¿™æ ·çš„å¼€å‘ä½“éªŒ</p>
<pre><code>let body1 = BodyStatus(type: .bbt, id: 1)
let body2 = BodyStatus(type: .period, id: 2)
let body3 = BodyStatus(type: .bbt, id: 3)
let body4 = BodyStatus(type: .bbt, id: 4)
let body5 = BodyStatus(type: .period, id: 5)
let body6 = BodyStatus(type: .bbt, id: 6)

let seq = PeroidSequence(origin: [body1,
                                  body2,
                                  body3,
                                  body4,
                                  body5,
                                  body6])
                                  
for i in seq &#123;
  print(i.id)
&#125;
// è¾“å‡ºç»“æœ ä¸º 2 å’Œ 5
</code></pre>
<p>â€‹    </p>
<p>ä¸‹é¢æ˜¯å®ç°æ–¹æ³•</p>
<pre><code>struct PeroidSequence: Sequence &#123;

  let origin: [BodyStatus]

  func makeIterator() -&gt; PeriodIterator &#123;
    return PeriodIterator(self)
  &#125;
&#125;

struct PeriodIterator: IteratorProtocol &#123;

  typealias Element = BodyStatus
  private var index = 0
  private let seq: PeroidSequence

  init(_ seq: PeroidSequence) &#123;
    self.seq = seq
  &#125;

  mutating func next() -&gt; BodyStatus? &#123;
    let count = seq.origin.count
    while (index &lt; count &amp;&amp; seq.origin[index].type != .period) &#123;
      index += 1
    &#125;
    if index &gt;= count &#123;
      return nil
    &#125;
    let result = seq.origin[index]
    index += 1
    return result
  &#125;
&#125;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æˆ‘ä»¬æŠŠã€Œè®¿é—®typeä¸ºperiodçš„bodystatusçš„é€»è¾‘ã€å°è£…èµ·æ¥äº†ï¼Œä¸‹æ¬¡ä½¿ç”¨åªè¦ç”¨ã€Œæ›´åŠ ä¼˜é›…ã€for ..in å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦æ¯æ¬¡åœ¨forå¾ªç¯é‡Œåšåˆ¤æ–­ã€‚</p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸ºç±»ä¼¼äºŒå‰æ ‘è¿™æ ·çš„éçº¿æ€§ç»“æ„åˆ›å»ºä¸åŒçš„è¿­ä»£å™¨ï¼Œä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªã€Œå…ˆåºéå†è¿­ä»£å™¨ã€å’Œ ã€Œå±‚æ¬¡éå†è¿­ä»£å™¨ã€ï¼ŒåŸç†åŒä¸Šå°±ä¸å†™å…·ä½“ä»£ç äº†ã€‚<br><img src="/images/tree_vis.jpeg"></p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>åŒäº‹å°±æ˜¯ä½ çš„ç”¨æˆ·ï¼Œäº’ç›¸ç»™ä¸€äº›feedbackå§ã€‚</p>
<div>
    <section id="comments" class="comments">
        <style>
            .utterances{max-width: 100%;}
        </style>
        <script 
            src="https://utteranc.es/client.js"
            repo="BongmiTeam/BongmiTeam.github.io"
            issue-term="pathname"
            label="Comment"
            theme="boxy-light"
            crossorigin="anonymous"
            async>
        </script>
    </section>
</div>
</div></div></body><script src="/js/highlight.min.js"></script><script src="/js/main.js?v=1"></script><script src="/js/bootstrap/bootstrap.min.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=undefined"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '');</script></html>